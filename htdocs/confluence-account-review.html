<h1>Review Confluence account request</h1>

<form onsubmit="confluence_account_request_submit(this); return false;">
    <div class="mb-3">
        <label for="project" class="form-label">Project</label>
        <input type="text" class="form-control" id="project"  readonly name="project" aria-describedby="projectHelp">
        <div id="projectHelp" class="form-text">This is the ASF project the user is wanting to register an account for</div>
    </div>
    <div class="mb-3">
        <label for="username" class="form-label">Desired User name</label>
        <input type="text" class="form-control" id="username" readonly name="username" aria-describedby="usernameHelp">
        <div id="usernameHelp" class="form-text">The user name must be between 4 and 20 characters long.</div>
    </div>
    <div class="mb-3">
        <label for="realname" class="form-label">Their real (public) name</label>
        <input type="text" class="form-control" id="realname" readonly name="realname" aria-describedby="realnameHelp">
        <div id="realnameHelp" class="form-text">This is the requester's actual name, as it will appear in Confluence.</div>
    </div>
    <div class="mb-3">
        <label for="why" class="form-label">Reason for wanting a Confluence account</label>
        <input type="text" class="form-control" id="why" readonly name="why" aria-describedby="whyHelp">
        <div id="whyHelp" class="form-text">Please review this reason, and only approve the account if the reason is sound.</div>
    </div>
    <input type="hidden" id="token" name="token">
    <div id="buttons_real">
        <button type="button" onclick="confluence_account_approve(this.form, 'approve');" class="btn btn-primary">Approve request</button>
        <button type="button" onclick="confluence_account_deny_details();" class="btn btn-danger">Deny request</button>
    </div>
    <div id="deny_details" style="display: none;">
        <div class="mb-3">
            <label for="reason" class="form-label">Optional reason for denying the request</label>
            <textarea class="form-control" id="reason" name="reason" aria-describedby="reasonHelp"></textarea>
            <div id="reasonHelp" class="form-text">If you wish to supply a reason for denying this request, do so here. We will send the reason to both the project and the requester.</div>
        </div>
        <button type="button" onclick="confluence_account_approve(this.form, 'deny');"  class="btn btn-danger">Deny request</button>
    </div>
    <div id="buttons_spin" style="display: none;">
        <button class="btn btn-primary" type="button" disabled>
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Processing request...
        </button>
    </div>
</form>

<script>
    document.body.onload = () => {
        OAuthGate(confluence_account_review);
    }
</script>
